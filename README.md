<h1 align="center">FIPI bot</h1>

## Описание
Приложение является частью проекта телеграмм бота для подготовки к истории преподавателя [@sans_sensss](https://t.me/sans_sensss).

С первой частью проекта можете ознакоимся по [ссылке](https://github.com/SentByRain/fipi_parser/tree/main).

ФИПИ бот служит для отравки заданий из открытого банка заданий [ФИПИ](https://ege.fipi.ru/bank/) пользователям через телеграмм и последующей отправки пользовательских ответов на проверку преподавателю.

## Установка

1. Склонируйте репозиторий к себе на устройство;
2. Установите необходимые зависимости:
```
yarn install
```
3. Запустите проект:

```
yarn dev
```

## Принцип работы кода

Код бота состоит из основного скрипта tg_bot.js и модуля task_picker.js. 

### task_picker.js

Модуль task_picker.js служит для выбора n-го количества случайных заданий из каждой категориий заданий, записанных в JSON файлах. 

*Примечание: планируется доработка алгоритма выбора заданий, после завершения разработки FIPI Parser.*

___

### tg_bot.js

Скрип tg_bot.js осуществляет отправку заданий пользователям и ответов пользователей преподавателю на проверку. 

При начале работы с ботом пользователю отправляются задания, и пользователь добавляется к ежедневной рассылке заданий. Для того, чтобы отправить ответ на задание преподаватилю нужно выбрать задание (свайпнуть влево) и затем ввести свой ответ (альтернативный вариант:
выбрать задание зажатием и нажать на кнопку "Ответить"). После отправки ответа бот должен прислать сообщение "Спасибо! Ваш ответ отправлен [@sans_sensss](https://t.me/sans_sensss) на проверку)".

В случае если пользователь не успевает решать задания из рассылки, ее можно приостановить, нажав в меню кнопку "Отключить ежедневню отправку заданий". 
При этом запрашивать задания и отправлять ответы на проверку все еще возможно. Рассылку можно возобновить при повторном нажатии в меню кнопки "Запуск бота".

*Примечание: В текущей версии бота нельзя настроить периодичность отправки заданий - будет доработано в следующих версиях.*

Также присутсвует возможность запросить дополнительные задания через кнопку в меню "Отправить задание".

___
## Результат работы

Текущий функционал телеграмм бота:

1) Приветсвие и начальная отправка заданий;
2) Отправка заданий по команде "Отправить задание";
3) Отправка заданий по таймеру (1 раз в день);
4) Отключение рассылки заданий.

## ВАЖНО
**В текущей версии программы отправляются только текстовые задания. После доработки FIPI Parser будет добавлена отправка заданий с картинками**
